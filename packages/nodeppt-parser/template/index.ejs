<!--
    Powered By nodeppt - This is probably the best web presentation tool so far!
    date: <%= date %>
-->
<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title><%= title %> - By <%= speaker %></title>
    <link rel="stylesheet" href="//cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdn.staticfile.org/prism/1.15.0/themes/prism.min.css">
    <link rel="stylesheet" href="//cdn.staticfile.org/KaTeX/0.10.0-rc.1/katex.min.css">
    <% if (hasOwnProperty('prismTheme') && ['dark', 'coy', 'funky', 'okaidia', 'tomorrow', 'solarizedlight', 'twilight'].includes(prismTheme)) { %>
        <link rel="stylesheet" href="//cdn.staticfile.org/prism/1.15.0/themes/prism-<%= prismTheme %>.min.css">
    <% } %>

    <% if (hasOwnProperty('css') && css.length) { %>
        <% for (var i = 0;i<css.length;i++) { %>
        <script src="<%= css[i] %>"></script>
        <% } %>
    <% } %>

    <% if (hasOwnProperty('plugins') && plugins && plugins.indexOf && ~plugins.indexOf('katex')) { %>
        <link rel="stylesheet" href="//cdn.staticfile.org/KaTeX/0.5.1/katex.min.css">
    <% } %>
</head>
<body>
<div>
    <article id="webslides">
        <%- content %>
    </article>
</div>
<% if (hasOwnProperty('plugins') && plugins && plugins.indexOf && ~plugins.indexOf('echarts')) { %>
    <script src="//cdn.staticfile.org/echarts/4.1.0-release/echarts.min.js"></script>
<% } %>
<% if (hasOwnProperty('js') && js.length) { %>
    <% for (var i = 0;i<js.length;i++) { %>
    <script src="<%= js[i] %>"></script>
    <% } %>
<% } %>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const ws = new WebSlide()

    <% if (hasOwnProperty('plugins') && plugins && plugins.indexOf && ~plugins.indexOf('echarts')) { %>
        const initEchart = (e)=>{

        const slide = ws.slides[e.detail.currentSlide0].el
        if(slide){
            const echartsNode = slide.querySelectorAll('.echarts')
            const echartsData = slide.querySelectorAll('.echarts-data')
            const len = echartsNode.length
            const echartsChart = []
            const echartsOption = []
            for (let j = 0; j < len; j++) {
            const et = (echartsChart[j] = echarts.init(echartsNode[j]))
            try {
                echartsOption[j] = JSON.parse(echartsData[j].innerHTML.trim())
                et.setOption(echartsOption[j])
            } catch (e) {
                console.log(e)
            }
            }
        }
    }
    ws.el.addEventListener('ws:slide-change', initEchart, false)
  <% } %>
}, false)
</script>
</body>
</html>
